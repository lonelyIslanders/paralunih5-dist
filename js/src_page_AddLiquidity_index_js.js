"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_page_AddLiquidity_index_js"],{91268:(e,t,r)=>{r.d(t,{HM:()=>u,fe:()=>o});var n=r(15861),a=r(64687),s=r.n(a),c=r(34234),i=r(38104),u=function(){var e=(0,n.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"ParaFactory",address:i.Z.ParaFactory,params:[t,r],method:"getPair",type:"call"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"ParaFactory",address:i.Z.ParaFactory,params:[],method:"allPairsLength",type:"call"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},60679:(e,t,r)=>{r.d(t,{H:()=>u,P:()=>o});var n=r(15861),a=r(64687),s=r.n(a),c=r(34234),i=r(38104),u=function(){var e=(0,n.Z)(s().mark((function e(t,r,n,a,u){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"router",address:i.Z.ParaRouter,params:[t,r,n,a,"0","0",u,"9999999999"],method:"addLiquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(t,r,n,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"router",address:i.Z.ParaRouter,params:[t,r,n,"0","0",a,"9999999999"],method:"removeLiquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},74440:(e,t,r)=>{r.d(t,{S:()=>u,n:()=>o});var n=r(15861),a=r(64687),s=r.n(a),c=r(38104),i=r(34234),u=function(){var e=(0,n.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)({abi:"ParaStableSwap",address:c.Z.ParaStableSwap,params:[t,r],method:"add_liquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)({abi:"ParaStableSwap",address:c.Z.ParaStableSwap,params:[t,r],method:"remove_liquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},57281:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var n=r(15861),a=r(70885),s=r(64687),c=r.n(s),i=r(67294),u=r(64478),o=r(63474),d=(r(79954),r(1424)),l=r(40498);const m=e=>i.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},e),i.createElement("path",{d:"M537.5 537.5v325c0 20.71-16.79 37.5-37.5 37.5s-37.5-16.79-37.5-37.5v-325h-325c-20.71 0-37.5-16.79-37.5-37.5s16.79-37.5 37.5-37.5h325v-325c0-20.71 16.79-37.5 37.5-37.5s37.5 16.79 37.5 37.5v325h325c20.71 0 37.5 16.79 37.5 37.5s-16.79 37.5-37.5 37.5h-325z",fillRule:"nonzero"})),f=i.forwardRef(((e,t)=>i.createElement(l.Z,Object.assign({name:"SvgPlus"},e,{ref:t}),i.createElement(m,null))));var p=r(34114),b=r(67892),h=r(58733),v=r(24539),w=r(91268),x=r(67959),y=r(36871),Z=r(68735),g=r(60679),S=r(72461),k=r(1667),E=r(70794),P=r(38104),_=r(49209),N=r(49947),D=r(5977),C=r(6065),U=r(74440),q=r(96486);function L(){var e=(0,u.$)().t,t=(0,i.useState)({symbol:"请选择",address:"",img:"https://paraluni.org/images/icons/coin_default_img.png"}),r=(0,a.Z)(t,2),s=r[0],l=r[1],m=(0,i.useState)({symbol:"请选择",address:"",img:"https://paraluni.org/images/icons/coin_default_img.png"}),L=(0,a.Z)(m,2),R=L[0],F=L[1],B=(0,i.useState)("0"),z=(0,a.Z)(B,2),A=z[0],T=z[1],j=(0,i.useState)("0"),H=(0,a.Z)(j,2),J=H[0],M=H[1],O=(0,i.useState)(""),G=(0,a.Z)(O,2),K=G[0],V=G[1],W=(0,i.useState)(""),I=(0,a.Z)(W,2),$=I[0],Q=I[1],X=(0,i.useState)(""),Y=(0,a.Z)(X,2),ee=Y[0],te=Y[1],re=(0,i.useState)(!1),ne=(0,a.Z)(re,2),ae=ne[0],se=ne[1],ce=(0,i.useState)(!1),ie=(0,a.Z)(ce,2),ue=ie[0],oe=ie[1],de=(0,D.k6)(),le=(0,v.Z)(),me=le.tokenNewList,fe=le.tokenList,pe=(0,Z.Z)().user,be=(0,i.useRef)(),he=function(){var e=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(t),s.address&&t){e.next=5;break}return V(""),Q(""),e.abrupt("return");case 5:_e(t,s.address,"first");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(t),R.address&&t){e.next=5;break}return V(""),Q(""),e.abrupt("return");case 5:Ne(t,R.address,"second");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e,t){be.current.showModal(e,t)},xe=function(){var e=(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.address&&R.address){e.next=2;break}return e.abrupt("return");case 2:if("PUSD"!==s.symbol&&"PUSD"!==R.symbol){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,w.HM)(s.address,R.address);case 6:t=e.sent,te(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe.address&&s.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y._J)("BNB"===s.symbol?"":s.address);case 4:return t=e.sent,e.next=7,(0,y.cv)("BNB"===s.symbol?"":s.address,pe.address,t);case 7:r=e.sent,T(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe.address&&R.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,y._J)("BNB"===R.symbol?"":R.address);case 4:return t=e.sent,e.next=7,(0,y.cv)("BNB"===R.symbol?"":R.address,pe.address,t);case 7:r=e.sent,M(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.address&&null!=pe&&pe.address){e.next=2;break}return e.abrupt("return");case 2:return t="PUSD"===s.symbol||"PUSD"===R.symbol?P.Z.ParaStableSwap:P.Z.ParaRouter,e.next=5,(0,y.EW)(s.address,pe.address,t);case 5:r=e.sent,se("0"!==r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.address&&null!=pe&&pe.address){e.next=2;break}return e.abrupt("return");case 2:return t="PUSD"===s.symbol||"PUSD"===R.symbol?P.Z.ParaStableSwap:P.Z.ParaRouter,e.next=5,(0,y.EW)(R.address,pe.address,t);case 5:r=e.sent,oe("0"!==r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var t=(0,n.Z)(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PUSD"===s.symbol||"PUSD"===R.symbol?P.Z.ParaStableSwap:P.Z.ParaRouter,t.next=3,(0,_.HF)(s.address,r).catch((function(){}));case 3:t.sent?(x.Z.show(e("common.active_success")),se(!0)):x.Z.show(e("common.active_fail"));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ee=function(){var t=(0,n.Z)(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PUSD"===s.symbol||"PUSD"===R.symbol?P.Z.ParaStableSwap:P.Z.ParaRouter,t.next=3,(0,_.HF)(R.address,r).catch((function(){}));case 3:t.sent?(x.Z.show(e("common.active_success")),oe(!0)):x.Z.show(e("common.active_fail"));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Pe=function(){var e=(0,n.Z)(c().mark((function e(t,r,n){var a,i,u,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0x0000000000000000000000000000000000000000"!==ee){e.next=2;break}return e.abrupt("return");case 2:if("PUSD"!==s.symbol&&"PUSD"!==R.symbol){e.next=13;break}return e.next=5,(0,y.tI)();case 5:if(a=e.sent,"first"!==n){e.next=11;break}return Q((0,S.JR)((0,E.O)(t).multipliedBy(a))),e.abrupt("return");case 11:V((0,S.JR)((0,E.O)(t).dividedBy(a)));case 12:return e.abrupt("return");case 13:return i=[{abi:"erc20",address:s.address,params:[],method:"decimals"},{abi:"erc20",address:R.address,params:[],method:"decimals"}],e.next=16,(0,C.Z)(i);case 16:return u=e.sent,e.next=19,(0,k.FT)((0,S.tr)(t,"first"===n?u[0]:u[1]).toFixed(),r,ee);case 19:o=e.sent,"first"===n?Q((0,S.JR)((0,S.eK)(o,u[1]))):V((0,S.JR)((0,S.eK)(o,u[0])));case 21:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),_e=(0,S.Nr)(Pe,300),Ne=(0,S.Nr)(Pe,300),De=function(){var t=(0,n.Z)(c().mark((function t(){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.address){t.next=3;break}return x.Z.show("请选择第一个币种"),t.abrupt("return");case 3:if(R.address){t.next=6;break}return x.Z.show("请选择第二个币种"),t.abrupt("return");case 6:if(s.address!==R.address){t.next=9;break}return x.Z.show("请选择两个不一样的币种"),t.abrupt("return");case 9:if(!(0,E.O)(K).isGreaterThan(A)){t.next=12;break}return x.Z.show("所选第一个币种余额不足"),t.abrupt("return");case 12:if(!(0,E.O)($).isGreaterThan(J)){t.next=15;break}return x.Z.show("所选第二个币种余额不足"),t.abrupt("return");case 15:return r=[{abi:"erc20",address:s.address,params:[],method:"decimals"},{abi:"erc20",address:R.address,params:[],method:"decimals"}],t.next=18,(0,C.Z)(r);case 18:if(n=t.sent,"PUSD"!==s.symbol&&"PUSD"!==R.symbol){t.next=25;break}return t.next=22,(0,U.S)([(0,S.tr)(K,n[0]).toFixed(),(0,S.tr)($,n[1]).toFixed()],0);case 22:return t.sent?(x.Z.show(e("page.AddLiquidity.add_success")),ye(),Ze()):x.Z.show(e("page.AddLiquidity.add_fail")),t.abrupt("return");case 25:return t.next=27,(0,g.H)(s.address,R.address,(0,S.tr)(K,n[0]).toFixed(),(0,S.tr)($,n[1]).toFixed(),pe.address).catch((function(){}));case 27:t.sent?(x.Z.show(e("page.AddLiquidity.add_success")),ye(),Ze()):x.Z.show(e("page.AddLiquidity.add_fail"));case 29:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){xe(),ge(),Se()}),[s,R]),(0,i.useEffect)((function(){ye(),Ze()}),[s,R,null==pe?void 0:pe.address]),i.createElement(i.Fragment,null,i.createElement("div",{style:{fontSize:"2.4rem"},className:"ml-20 font-weight-500 font-color-white mt-10"},e("page.AddLiquidity.add_liquidity")),i.createElement(o.Z,{bgColor:"#141419"},i.createElement("div",{className:"font-size-16 font-color-white font-weight-500"},e("page.AddLiquidity.choose_token")),i.createElement("div",{className:"divide-line mt-10"}),"0x0000000000000000000000000000000000000000"===ee&&i.createElement("div",{className:"flex-row add_liq_tip mt-20"},i.createElement(d.Z,{style:{color:"#FF24AB",fontSize:"18px"}}),i.createElement("div",{className:"add_liq_tip-text ml-5"},e("page.AddLiquidity.no_liquidity_tip"))),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-between mt-20 mb-10"},i.createElement("div",{className:"flex-row fl-ai-center",onClick:function(){we(s.symbol,"first")}},i.createElement("img",{src:s.img,width:20,height:20}),i.createElement("div",{className:"font-color-white font-size-16 ml-5"},s.symbol),i.createElement("img",{src:b.Z,width:10,height:5,className:"ml-10"})),i.createElement("div",{className:"font-size-12 font-color-describe font-weight-bold"},e("common.available"),"：",A)),i.createElement(h.Z,{onChange:he,inputClass:"inputRef-inputClass",inputmaxClass:"inputRef-inputmaxClass",value:K,placeholder:e("common.enter_number"),maxValue:A,setMax:function(){return he(A)},setClean:function(){return he("")}}),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-center"},i.createElement(f,{style:{color:"#707070",fontSize:"24px",marginTop:"1rem"}})),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-between mt-20 mb-10"},i.createElement("div",{className:"flex-row fl-ai-center",onClick:function(){we(s.symbol,"second")}},i.createElement("img",{src:R.img,width:20,height:20}),i.createElement("div",{className:"font-color-white font-size-16 ml-5"},R.symbol),i.createElement("img",{src:b.Z,width:10,height:5,className:"ml-10"})),i.createElement("div",{className:"font-size-12 font-color-describe font-weight-bold"},e("common.available"),"：",J)),i.createElement(h.Z,{onChange:ve,inputClass:"inputRef-inputClass",inputmaxClass:"inputRef-inputmaxClass",value:$,placeholder:e("common.enter_number"),maxValue:J,setMax:function(){return ve(J)},setClean:function(){return ve("")}}),(!ae||!ue)&&s.address&&R.address&&i.createElement("div",{className:"flex-row fl-jc-between"},!ae&&i.createElement("div",{className:"height-44 button-common flex-1 button-click mt-30",onClick:ke},e("page.LPDoubleEnter.enter_active_name",{name:s.symbol})),!ue&&i.createElement("div",{className:"height-44 button-common flex-1 button-click mt-30 ".concat(!ae&&"ml-10"),onClick:Ee},e("page.LPDoubleEnter.enter_active_name",{name:R.symbol}))),(!s.address||!R.address||ae&&ue)&&i.createElement("div",{className:"height-44 button-common button-click mt-30",onClick:De},e("page.AddLiquidity.submit_add")),i.createElement("div",{className:"divide-line mt-30"}),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-between height-44 mt-5",onClick:function(){de.push("/addLiquidityStore")}},i.createElement("div",{className:"font-weight-500 font-color-describe font-size-14"},e("common.my_position")),i.createElement(p.Z,{className:"font-color-describe font-size-12"})),i.createElement(N.Z,{ref:be,onCallback:function(e,t){if(e.symbol!==s.symbol&&e.symbol!==R.symbol)if("first"===t){if("PUSD"===e.symbol)return l(e),void F({address:P.Z.USDT,symbol:"USDT",decimal:18,img:"https://paraluni.org/images/products/USDT@2x.png"});l(e)}else if("second"===t){if("PUSD"===e.symbol)return F(e),void l({address:P.Z.USDT,symbol:"USDT",decimal:18,img:"https://paraluni.org/images/products/USDT@2x.png"});F(e)}},list:(0,q.uniqBy)(fe.concat(me),"address")})))}}}]);